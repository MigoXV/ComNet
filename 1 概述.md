[TOC] 

# 第一章 概述

## 1.1 计算机网络在信息时代中的作用

- 21世纪重要特征：以网络为核心的信息时代
  - 数字化
  - 信息化
  - 网络化

- 通信网已成为信息社会的命脉和发展知识经济的重要基础

- 三大通信网

  - 电信网络
  - 广播电视网络
  - 计算机网络

  现在已经合一，其中计算机网络发展最快，20th90s后，以互联网为代表的计算机网络（IP网）得到了飞速发展。各种通信网将以互联网为核心实现相互融合

- 两个世界：现实物质世界、网络虚拟世界

## 1.2 互联网概述

### 1.2.1 计算机网络的产生背景

- 冷战产物
- 美军方使用电话交换网，很脆弱
- ARPA提出：提高生存性——计算机网络

#### 电话交换网

- 数量少：两两互联

- 数量多：使用交换机

<img src="https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20220924165515691.png" alt="image-20220924165515691" style="zoom:33%;" />

交换机：进行转接，将一条电话线转接到另一条电话线，使之连通，实现任意两方之间的通信。

#### 电话网的结构

集中式结构，或派生的准树形等级结构

网络中央设备是电话交换机，如程控交换机。 在大型电话网中，电话交换机可分为不同的等级。

<img src="https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20220924170635821.png" alt="image-20220924170635821" style="zoom: 50%;" />

#### 电话网的脆弱性

- 正在通信的电路中有一个交换机或有一条链路被炸毁, 则整个通信电路就要中断
- 如要改用其他迂回电路, 必须重新拨号建立连接, 这将要延误一些时间

### 1.2.2  计算机网络

#### 设计需求

- 数据传输可靠，生存能力强
- 用于计算机之间的数据传送，而不是打电话
- 能够链接不同类型的计算机

#### 世界上第一个计算机网络ARPANET

为典型的广域网

最早4个节点的结构如图：

<img src="https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20220919112037976.png" alt="image-20220919112037976" style="zoom: 25%;" />

#### 设计思想

- 网络分为通信子网和通信子网
- **分组交换**：将很长的数据分成小段，加上辅助信息组成数据包，通过辅助信息决定信息传输的路径以及完成纠错
- 通信子网采用分布式控制的网状结构
  - 所有网络节点同等重要
  - 数据传输有多条路由，即存在冗余路由

<img src="https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20220919112341779.png" alt="image-20220919112341779" style="zoom: 50%;" />

#### 主要贡献

1. 开展了对计算机网络定义与分类方法的研究。
2. 提出了资源子网/通信子网的二级网络结构概念。
3. 研究了分组交换的协议与实现技术。
4. 研究了网络体系结构的层次型模型与协议体系。
5. 开展了TCP/IP协议与网络互联技术的研究。

## 1.3 互联网的组成P10

- 主机（Host）: 是进行信息处理的, 为用户提供共享资源或服务, 也能从网络收发数据分组, 并且通过网络可以跟其他主机交换信息。

- 路由器(Router): 为分组选择传输路径, 并通过存储转发（即实现分组交换），把分组传递到下一个路由器, 或交付给目的主机

  补充说明:
1) 主机和路由器实际上都是计算机, 只是其作用和配置不同,路由器的功能相对简单;
2) 有时主机兼有路由器的功能。

## 交换

- 狭义：同“转接”，详见上文交换机
- 广义：网络设备将某条物理线路或逻辑线道上的信息转发到另一条物理线路或逻辑线道上去的过程
- 涉及传输线路、信道、带宽等资源的动态分配

**通信网的核心技术是交换技术，请解释“交换”的含义：**

答：通信网中“交换”（Switching）的本质是指网络设备将一条线路(或信道)上的数据/信号转发到另一条线路(或信道)上去的过程；交换功能主要是由网络中间结点设备来完成的，通过交换，使得任意两个终端都能高效利用公共的网络设施进行相互通信。交换技术是通信网的核心技术，不同类型的通信网可采用不同的交换技术。

## 电路交换

<img src="https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20220924170554508.png" alt="image-20220924170554508" style="zoom:33%;" />

![image-20240107090113242](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107090113242.png)

- 电话网采用 “电路交换” 方式通信
- 电路交换相当于 “开关切换” (Switching), 即在 通信的双方之间建立一条专用的连通 电路来传递 信号
- 电路交换**面向连接**，有三个阶段
  - 建立连接
  - 通信（传递信息）
  - 释放连接

### 电路交换的特点

传送计算机数据效率低：计算机数据具有突发性，导致通信线路利用率很低。因为建立连接需要时间



## 分组交换

### 概念

将很长的数据分成小段，加上辅助信息组成数据包，通过辅助信息决定信息传输的路径以及完成纠错

### 以主机为中心到以网络为中心

<img src="https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20220919112843702.png" alt="image-20220919112843702" style="zoom: 25%;" />

### 分组交换的基本原理

- 分组——数据包，数据单元
- 存储转发方式
- 路由选择

### 报文与报文分组

- 报文(Message,消息)：计算机用户（应用）每次传输的不定长的数据块，有一定的封装格式
- 分组(Packet,数据包)：附加头部短的报文分段，也叫做**数据包**

![image-20220924171434457](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20220924171434457.png)

### 分组传输处理过程

1. 在发送端，先把较长的报文划分为较短的、固定长度的数据段

2. 在每一个数据段前面添加上首部构成分组

分组首部的重要性：

- 每一个分组的首部都含有地址等控制信息。
- 分组交换网中的结点交换机根据收到的分组的首部中的地址信息, 把分组转发到下一个结点交换机。
- 用这样的存储转发方式, 最后分组就能到达最终目的地。

![image-20240107091923723](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107091923723.png)

3. 收到分组后剥去首部，还原为报文
4. 最后，在接收端把收到的数据恢复为原来的报文

---

- 主机
- 节点
- 路由器

---

### 存储转发方式

+ 在路由器中的输入和输出端口之间没有直接连线。
+ 路由器处理分组的过程是:
  + 把收到的分组先放入缓存（暂时存储）；
  + 查找转发表, 找出到某个目的地址应从哪个端口转发;
  + 把分组送到适当的端口转发出去。

### 分组交换的特点

- 高效：对通信链路是逐段占用, 动态分配传输线路/带宽，资源利用率高。
- 灵活：以分组为传送单位和查找路由。
- 迅速：不必先建立连接就能向其他主机发送分组。
- 可靠: 保证可靠性的网络协议; 分布式的路由选择协议使网络有很好的生存性。

### 带来的问题

- 分组在各结点存储转发时需要排队, 这就会造成一定的时延。
- 分组必须携带的首部（里面有必不可少的控制信息）也造成了一定的开销。

## 报文交换

- 20th40s,电报通信也采用基于存储转发原理的报文交换
- 时延较长，几分钟到几小时不等，现在基本被淘汰
- 长度没有限制，导致网络延时波动大，中间存储器的容量容易不足或浪费

## 三种交换的比较

![image-20240107092531104](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107092531104.png)

| 电路交换优点 | 缺点                 | 报文交换优点   | 缺点                 | 分组交换优点               | 缺点                                                       |
| ------------ | -------------------- | -------------- | -------------------- | -------------------------- | ---------------------------------------------------------- |
| 通信时延小   | 建立连接时间长       | 无需建立连接   | 引起了转发时延       | 无需建立连接               | 引起了转发时延                                             |
| 有序传输     | 线路独占，使用效率低 | 动态分配线路   | 需要较大存储缓存空间 | 线路利用率高               | 需要传输额外的信息量                                       |
| 没有冲突     | 灵活性差             | 提高线路可靠性 | 需要额外的信息量     | 简化了存储管理             | 对于数据报服务，存在失序、丢失或重复分组的情况             |
| 适用范围广   | 难以规格化           | 提高线路利用率 |                      | 加速传输                   | 对于虚电路服务，存在呼叫建立、数据传输和虚电路释放三个过程 |
| 实时性强     |                      | 提供多目标服务 |                      | 减少了出错概率和重发数据量 |                                                            |
| 控制简单     |                      |                |                      |                            |                                                            |

## 1.4 计算机网络的分类

1. 按网络覆盖的地理范围分类

   - 广域网 WAN (Wide Area Network)
   - 局域网 LAN (Local Area Network)
   - 城域网 MAN (Metropolitan Area Network)
   - 个人区域网 PAN (Personal Area Network)

2. 按使用者类别来分类

   - 公用网 (public network)：公用数据网（PDN）、宽带IP骨干网
   - 专用网 (private network)：各企业内部网络
   - 混合网:各部门/行业网络,  教育科研网、政府网

3. 按传输速率或链路带宽来分类

   - 高速网（宽带网）
   - 低速网（窄带网）

4. 按传输介质来分类

   - 有线网络，常用有线介质：双绞线、光纤、同轴电缆等。

   - 无线网络，常用无线介质：无线电波、微波、红外线、激光等

5. 按通信方式来分类

   - 广播网络:采用广播通信信道, 或共享媒介型通信方式;

   - 点-点网络:采用点一点通信信道, 或交换式通信方式。

      存储转发、路由选择

## 1.5 计算机网络体系结构

### 原理体系结构

|   5 应用层   | 解决通过应用进程的交互来实现特定网络应用的问题 |
| :----------: | ---------------------------------------------- |
|   4 传输层   | 解决进程之间基于网络的通信问题                 |
|   3 网络层   | 解决分组在多个网络上传输路由的问题             |
| 2 数据链路层 | 解决分组在一个网络或一段链路上传输的问题       |
|   1 物理层   | 解决使用何种信号来传输**比特**的问题           |

- 在协议的控制下，两个对等实体之间的逻辑通信使得本层可以向上一层提供服务

- 要实现本层协议，还需要使用下面一层所提供的服务

![image-20240107095302201](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107095302201.png)

![image-20240107095319178](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107095319178.png)

![image-20240107095330058](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107095330058.png)

举例分析：

第一步，应用层生成http报文，交给运输层 

![image-20240107154713835](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107154713835.png)

第二步，添加tcp首部，称为tcp报文段，交给网络层

![image-20240107154837144](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107154837144.png)

第三步，网络层给tcp报文段添加ip首部，使之成为ip数据包，然后交给数据链路层

![image-20240107155042376](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107155042376.png)

第四步，数据链路层在ip数据报的基础上添加**首部和尾部**，成为帧，再交给物理层

![image-20240107155207080](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107155207080.png)

第五步，物理层将帧看作比特流，添加前导码，再变换成相应的信号发送到传输媒体

![image-20240107155613344](https://mypic-1312707183.cos.ap-nanjing.myqcloud.com/image-20240107155613344.png)

第六步，信号通过传输媒体到达路由器，物理层将信号变成比特流，再变换为帧，链路层将首部尾部去掉后，交给网络层（实际上交互的是IP数据报），网络层解析IP数据报的首部，提取出目的网络地址，然后查找路由表，确定转发端口，再向下交互.......
